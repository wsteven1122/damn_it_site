<!DOCTYPE html>
<html lang="zh-TW" class="game-client" data-version="1.1.0-curtain">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover"
    />
    <meta name="description" content="蛋米特DAMN_IT網頁遊戲。" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>蛋米特DAMN IT! - 傳說中的米特蛋</title>
    <link
      rel="icon"
      type="image/png"
      href="./img/frame_001 1.png"
      sizes="32x32"
    />
    <link rel="apple-touch-icon" href="./img/botton_Start_.png" />
    <link rel="stylesheet" href="./css/Style.css" />
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.12.2/lottie.min.js"
      defer
    ></script>
    <script src="script.js" defer></script>
    <link rel="prefetch" href="./img/784908236.161834.mp4" as="video" />
  </head>
  <body class="theme-dark-alchemy screen-ready">
    <div
      id="alert-message"
      class="alert hidden"
      role="alert"
      aria-live="polite"
    >
      <span id="alert-icon" class="alert-icon-symbol" aria-hidden="true"></span>
      <span id="alert-text" class="alert-content-text">系統訊息文字</span>
      <div class="alert-progress-bar"></div>
    </div>

    <div
      id="guide-overlay"
      class="guide-overlay hidden"
      aria-modal="true"
      role="dialog"
      aria-label="新手導覽"
    >
      <div id="guide-focus-ring" class="guide-focus-ring"></div>
      <div id="guide-tooltip" class="guide-tooltip">
        <header class="tooltip-header">
          <span class="tooltip-stage-indicator"
            >步驟 <span id="tip-current-step">1</span> /
            <span id="tip-total-steps">4</span></span
          >
        </header>
        <p id="tip-text" class="tooltip-main-text">指引提示文字</p>
        <footer class="tooltip-footer">
          <button id="tip-next-btn" class="btn btn-primary tooltip-nav-btn">
            下一步
          </button>
        </footer>
      </div>
      <div class="guide-click-prompt">點擊任意處或按 [下一步] 繼續</div>
    </div>

    <div
      id="result-modal"
      class="modal"
      role="dialog"
      aria-modal="true"
      aria-labelledby="modal-title"
    >
      <div class="modal-content">
        <button class="close-btn" aria-label="關閉結果視窗">&times;</button>
        <header class="modal-header-container">
          <h3 id="modal-title" class="modal-header">煉蛋結果：未知米特蛋</h3>
        </header>
        <div class="result-display">
          <img
            id="result-image"
            src="./img/待機蛋 (去背) 1.png"
            alt="煉蛋結果圖像"
            class="result-egg-img"
          />
          <div
            id="result-lottie-effect"
            class="result-lottie-effect"
            aria-hidden="true"
          ></div>
        </div>
        <div class="result-description-container">
          <p id="result-text" class="modal-description">
            煉蛋結果的詳細說明文字。
          </p>
          <p class="result-metadata">
            編號: <span id="result-number">???</span> | 稀有度:
            <span id="result-rarity">E</span>
          </p>
        </div>
        <footer class="modal-footer">
          <button
            class="btn btn-primary next-screen-btn"
            data-target="screen-1"
            aria-controls="screen-1"
          >
            再次挑戰 (RETRY)
          </button>
          <button id="save-to-gallery-btn" class="btn btn-secondary">
            儲存到圖鑑
          </button>
        </footer>
      </div>
      <div class="modal-decoration-top"></div>
      <div class="modal-decoration-bottom"></div>
    </div>

    <div id="curtain-transition" aria-hidden="true">
      <div class="curtain curtain-left"></div>
      <div class="curtain curtain-right"></div>
    </div>

    <main id="game-container" role="application">
      <!-- 首頁：精簡的主畫面與起始操作 -->
      <section
        id="screen-1"
        class="screen home-screen active"
        data-index="1"
        aria-label="首頁：蛋米特 DAMN IT!"
      >
        <div class="home-visual-layer" aria-hidden="true">
          <div class="home-white-egg" role="presentation"></div>
          <div class="floating-eggshell"></div>
          <div class="floating-durian"></div>
        </div>

        <div class="home-top-bar">
          <button
            id="volume-btn"
            class="icon-btn volume-toggle"
            aria-label="音量"
          >
            <img src="./img/voice_on.png" alt="音量" />
          </button>
          <div class="home-utility-group">
            <button
              id="guide-btn"
              class="icon-btn guide-trigger"
              aria-label="新手導覽"
            >
              <img src="./img/Botton_teaching_Default.png" alt="導覽" />
            </button>
            <button
              id="settings-btn"
              class="icon-btn next-screen-btn"
              data-target="screen-settings"
              aria-label="設定"
            >
              <img src="./img/太陽.png" alt="設定" />
            </button>
          </div>
        </div>
        <div class="floating-ingredients" aria-hidden="true">
          <img src="./img/IMG_9990 1.png" class="float-item item-1" alt="" />
          <img src="./img/IMG_9998 1.png" class="float-item item-2" alt="" />
          <img src="./img/IMG_0003 1.png" class="float-item item-3" alt="" />
          <img src="./img/IMG_9997 1.png" class="float-item item-4" alt="" />
          <img src="./img/IMG_9985 1.png" class="float-item item-5" alt="" />
          <img src="./img/IMG_9986 1.png" class="float-item item-6" alt="" />
          <img src="./img/IMG_9999 1.png" class="float-item item-7" alt="" />
        </div>

        <div class="home-hero">
          <img
            src="./img/frame_001 1.png"
            alt="蛋米特 DAMN IT!"
            class="hero-logo"
            loading="lazy"
          />
          <div class="hero-actions">
            <button
              id="lottie-start-btn"
              class="start-button menu-image-btn next-screen-btn"
              data-target="screen-2"
              aria-label="開始遊戲"
            >
              <img src="./img/botton_Start_.png" alt="開始遊戲" />
            </button>
            <button
              class="menu-image-btn next-screen-btn"
              data-target="screen-gallery"
              id="menu-btn"
            >
              <img
                src="./img/Secondary Botton_Picture Book_Default.png"
                alt="成果圖鑑"
              />
            </button>
            <button
              class="menu-image-btn next-screen-btn"
              data-target="screen-menu"
            >
              <img
                src="./img/Secondary Botton_Magic_Default.png"
                alt="特別任務"
              />
            </button>
          </div>
        </div>
      </section>

      <!-- 故事：對話播放與跳過入口 -->
      <section
        id="screen-2"
        class="screen"
        data-index="2"
        aria-label="故事介紹：煉蛋廚房的起源"
      >
        <div class="hand-overlay story-hands global-hands" aria-hidden="true">
          <img src="./img/Lhand.png" alt="雙手指引" class="hand-image left" />
          <img src="./img/Rhand.png" alt="雙手指引" class="hand-image right" />
        </div>
        <div class="story-stack">
          <div id="messages" class="messages" role="log" aria-live="polite"></div>
          <div id="typingIndicator" class="typing-bubble" aria-hidden="true">
            <div class="typing-dot"></div>
            <div class="typing-dot"></div>
            <div class="typing-dot"></div>
          </div>
        </div>

        <div class="dialog-footer-controls">
          <button
            id="continue-btn"
            class="btn btn-primary next-screen-btn hidden"
            data-target="screen-3"
            aria-controls="screen-3"
          >
            進入煉蛋爐 (CONTINUE)
          </button>
          <button
            id="dialog-skip-btn"
            class="btn btn-secondary dialog-skip-btn"
          >
            跳過故事 (SKIP)
          </button>
        </div>
      </section>

      <!-- 教學：煉蛋爐說明 -->
      <section
        id="screen-3"
        class="screen"
        data-index="3"
        aria-label="煉蛋爐介紹"
      >
        <div class="hand-overlay global-hands" aria-hidden="true">
          <img
            src="./img/Lhand.png"
            alt="雙手指引"
            class="hand-image left"
          />
          <img
            src="./img/Rhand.png"
            alt="雙手指引"
            class="hand-image right"
          />
        </div>
        <div class="guide-panel">
          <div class="guide-bubble">
            <h2>煉蛋爐操作指南</h2>
            <p>
              把食材拖到米特蛋上，最多三種。桌面周圍的食材都可以試試，選中後會在上方欄位顯示，點叉叉可以取消。
            </p>
            <p>影片播放完才能查看結果，右下角有半透明的 Skip 按鈕。</p>
          </div>
          <div class="guide-panel-footer">
            <button
              class="btn btn-primary next-screen-btn"
              data-target="screen-4"
              aria-controls="screen-4"
            >
              準備好了，選擇食材！
            </button>
          </div>
        </div>
      </section>

      <!-- 選食材：拖曳食材到米特蛋 -->
      <section
        id="screen-4"
        class="screen"
        data-index="4"
        aria-label="食材選擇"
      >
        <div class="alchemy-workbench bright">
          <div class="kitchen-top-bar">
            <div
              id="selection-row"
              class="slot-row"
              role="list"
              aria-label="已放入的食材欄位 (最多 3 種)"
            >
              <div class="selection-slot" data-slot-index="1" role="listitem">
                <span class="slot-label">空槽</span>
                <button class="slot-clear" aria-label="移除這個食材">✕</button>
              </div>
              <div class="selection-slot" data-slot-index="2" role="listitem">
                <span class="slot-label">空槽</span>
                <button class="slot-clear" aria-label="移除這個食材">✕</button>
              </div>
              <div class="selection-slot" data-slot-index="3" role="listitem">
                <span class="slot-label">空槽</span>
                <button class="slot-clear" aria-label="移除這個食材">✕</button>
              </div>
            </div>

            <div
              id="kitchen-status-chip"
              class="selection-status chip"
              role="status"
              aria-live="polite"
            >
              已選擇：<span id="current-selection-count">0</span> /
              <span id="max-selection-count">3</span>
            </div>
          </div>

          <div class="workbench-body">
            <div
              class="hand-overlay kitchen-hands global-hands"
              aria-hidden="true"
            >
              <img
                src="./img/Lhand.png"
                alt="雙手"
                class="hand-image left"
              />
              <img
                src="./img/Rhand.png"
                alt="雙手"
                class="hand-image right"
              />
            </div>

            <div class="main-egg-display drop-target" aria-label="米特蛋核心">
              <div class="absorb-glow" aria-hidden="true"></div>
              <div class="egg-graphic"></div>
              <p class="drop-hint">拖曳食材到米特蛋</p>
            </div>

            <div
              id="ingredient-tray"
              class="ingredient-table"
              role="group"
              aria-label="可選擇的魔法食材"
            >
              <div
                class="ingredient-token"
                data-ingredient="榴槤"
                draggable="true"
              >
                <img src="./img/榴槤.png" alt="榴槤" />
              </div>
              <div
                class="ingredient-token"
                data-ingredient="魷魚"
                draggable="true"
              >
                <img src="./img/魷魚.png" alt="魷魚" />
              </div>
              <div
                class="ingredient-token"
                data-ingredient="檸檬"
                draggable="true"
              >
                <img src="./img/檸檬.png" alt="檸檬" />
              </div>
              <div
                class="ingredient-token"
                data-ingredient="手機"
                draggable="true"
              >
                <img src="./img/手機.png" alt="手機" />
              </div>
              <div
                class="ingredient-token"
                data-ingredient="TNT"
                draggable="true"
              >
                <img src="./img/炸彈.png" alt="TNT" />
              </div>
              <div
                class="ingredient-token"
                data-ingredient="香菜"
                draggable="true"
              >
                <img src="./img/香菜.png" alt="香菜" />
              </div>
              <div
                class="ingredient-token"
                data-ingredient="隕石"
                draggable="true"
              >
                <img src="./img/石頭.png" alt="隕石" />
              </div>
              <div
                class="ingredient-token"
                data-ingredient="服裝"
                draggable="true"
              >
                <img src="./img/褲子.png" alt="服裝" />
              </div>
            </div>
          </div>
        </div>

        <footer class="selection-footer">
          <button
            id="cast-spell-btn"
            class="btn btn-primary next-screen-btn"
            data-target="screen-5"
            aria-controls="screen-5"
            disabled
          >
            開始唸咒！
          </button>
        </footer>
      </section>

      <!-- 播放影片：單純呈現影片並提供跳過 -->
      <section
        id="screen-5"
        class="screen"
        data-index="5"
        aria-label="影片播放"
      >
        <div class="transformation-space">
          <div class="kitchen-scene-backdrop" aria-hidden="true"></div>
          <div class="dark-veil" aria-hidden="true"></div>

          <div class="sparkle-field" aria-hidden="true">
            <span class="sparkle s1"></span>
            <span class="sparkle s2"></span>
            <span class="sparkle s3"></span>
            <span class="sparkle s4"></span>
          </div>

          <div class="circle-stage" aria-label="影片播放區域">
            <button id="skip-video-btn" class="skip-video-btn">Skip</button>
            <div class="shine-ring"></div>
            <div class="pulse-glow"></div>

            <div class="video-shell">
              <video
                id="casting-video"
                src="./img/桌子.mp4"
                playsinline
                preload="auto"
                poster="./img/桌子.mp4"
                aria-label="煉蛋過程影片"
              ></video>
              <div
                id="spinner-overlay"
                class="spinner-overlay"
                role="status"
                aria-label="載入中"
              >
                <div class="loading-spinner"></div>
              </div>
            </div>
          </div>
        </div>

        <footer class="casting-footer">
          <button id="skip-video-secondary" class="btn btn-secondary skip-video-btn">
            Skip
          </button>
          <button
            id="next-from-video-btn"
            class="btn btn-primary next-screen-btn locked"
            data-target="screen-6"
            aria-controls="screen-6"
            disabled
          >
            查看結果
          </button>
        </footer>
      </section>

      
      <!-- 結果：彈窗以外的備用視圖 -->
      <section
        id="screen-6"
        class="screen"
        data-index="6"
        aria-label="煉蛋結果"
      >
        <div class="hand-overlay global-hands" aria-hidden="true">
          <img
            src="./img/Lhand.png"
            alt="雙手"
            class="hand-image left"
          />
          <img
            src="./img/Rhand.png"
            alt="雙手"
            class="hand-image right"
          />
        </div>
        <div class="result-shell">
          <h2>煉蛋結果</h2>
          <p>結果已同步到上方彈窗。</p>
          <button
            class="btn btn-primary next-screen-btn"
            data-target="screen-1"
            aria-controls="screen-1"
          >
            返回首頁
          </button>
        </div>
      </section>

      
      <!-- 特別任務：預留版位 -->
      <section
        id="screen-menu"
        class="screen"
        data-index="7"
        aria-label="特別任務選單"
      >
        <div class="hand-overlay global-hands" aria-hidden="true">
          <img
            src="./img/Lhand.png"
            alt="雙手"
            class="hand-image left"
          />
          <img
            src="./img/Rhand.png"
            alt="雙手"
            class="hand-image right"
          />
        </div>
        <div class="placeholder-card">特別任務準備中</div>
      </section>

      
      <!-- 圖鑑：成果瀏覽 -->
      <section
        id="screen-gallery"
        class="screen"
        data-index="8"
        aria-label="成果圖鑑"
      >
        <div class="hand-overlay global-hands" aria-hidden="true">
          <img
            src="./img/Lhand.png"
            alt="雙手"
            class="hand-image left"
          />
          <img
            src="./img/Rhand.png"
            alt="雙手"
            class="hand-image right"
          />
        </div>
        <div class="gallery-wrapper">
          <header class="gallery-header">
            <div class="gallery-ribbon">成果圖鑑</div>
            <p class="gallery-subtitle">往下拖移，欣賞漂浮的小卡收藏</p>
          </header>
          <div class="gallery-scroll" role="list">
            <div class="floating-gallery" id="floating-gallery-field">
              <article class="gallery-card tilt-1" role="listitem">
                <img src="./img/待機蛋 (去背) 1.png" alt="米特蛋" />
                <div class="card-body">
                  <h3>米特蛋 #001</h3>
                  <p>基礎型態，閃著溫暖光澤的入門款。</p>
                </div>
              </article>
              <article class="gallery-card tilt-2" role="listitem">
                <img src="./img/邪惡蟲蟲蛋糕.png" alt="邪惡蟲蟲蛋糕" />
                <div class="card-body">
                  <h3>邪惡蟲蟲蛋糕</h3>
                  <p>綿密口感，苦味在廚房飄蕩。</p>
                </div>
              </article>
              <article class="gallery-card tilt-3" role="listitem">
                <img src="./img/流星鎚 1.png" alt="流星鎚" />
                <div class="card-body">
                  <h3>流星鎚</h3>
                  <p>攪動星辰的流星鎚，讓蛋呈現夜空色澤。</p>
                </div>
              </article>
              <article class="gallery-card tilt-1" role="listitem">
                <img src="./img/地獄跳跳糖.png" alt="地獄跳跳糖" />
                <div class="card-body">
                  <h3>地獄跳跳糖</h3>
                  <p>透明的果凍層，上浮著撒旦光點。</p>
                </div>
              </article>
              <article class="gallery-card tilt-2" role="listitem">
                <img src="./img/防摔手機殼.png" alt="防摔手機殼" />
                <div class="card-body">
                  <h3>防摔手機殼</h3>
                  <p>漂浮在空中的手機殼，帶來堅固的味道。</p>
                </div>
              </article>
              <article class="gallery-card tilt-3 locked" role="listitem">
                <div class="locked-mask">未解鎖</div>
                <img src="./img/香菜冰淇淋.png" alt="香菜冰淇淋" />
                <div class="card-body">
                  <h3>香菜冰淇淋</h3>
                  <p>解鎖條件：完成三次香菜組合。</p>
                </div>
              </article>
              <article class="gallery-card tilt-1 locked" role="listitem">
                <div class="locked-mask">???</div>
                <img src="./img/大boss.png" alt="神秘首領" />
                <div class="card-body">
                  <h3>神秘首領蛋</h3>
                  <p>未知配方，等待勇者解鎖。</p>
                </div>
              </article>
            </div>
          </div>
        </div>
      </section>

      
      <!-- 設定：簡易占位元件 -->
      <section
        id="screen-settings"
        class="screen"
        data-index="9"
        aria-label="設定"
      >
        <div class="hand-overlay global-hands" aria-hidden="true">
          <img
            src="./img/Lhand.png"
            alt="雙手"
            class="hand-image left"
          />
          <img
            src="./img/Rhand.png"
            alt="雙手"
            class="hand-image right"
          />
        </div>
        <div class="placeholder-card">設定頁面</div>
      </section>
    </main>

    <div id="persistent-ui" class="persistent-ui">
      <div class="persistent-inner">
        <div class="persistent-home">
          <button
            class="chip-btn next-screen-btn"
            data-target="screen-1"
            aria-label="回首頁"
          >
            ⬅ 回首頁
          </button>
        </div>
      </div>
    </div>

    <audio
      id="bgm-audio"
      src="./img/おもしろすぎてどっかん @ フリーBGM DOVA-SYNDROME OFFICIAL YouTube CHANNEL.mp3"
      preload="auto"
      loop
    ></audio>
  </body>
</html>
